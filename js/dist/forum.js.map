{"version":3,"sources":["webpack://@gbcl-fof-upload-qcloud/webpack/bootstrap","webpack://@gbcl-fof-upload-qcloud/external \"flarum.core.compat['forum/app']\"","webpack://@gbcl-fof-upload-qcloud/./node_modules/@babel/runtime/regenerator/index.js","webpack://@gbcl-fof-upload-qcloud/external \"flarum.core.compat['common/extend']\"","webpack://@gbcl-fof-upload-qcloud/./node_modules/PDFObject/pdfobject.js","webpack://@gbcl-fof-upload-qcloud/external \"flarum.core.compat['forum/components/CommentPost']\"","webpack://@gbcl-fof-upload-qcloud/external \"flarum.core.compat['forum/components/Post']\"","webpack://@gbcl-fof-upload-qcloud/./node_modules/@babel/runtime/helpers/regeneratorRuntime.js","webpack://@gbcl-fof-upload-qcloud/./node_modules/@babel/runtime/helpers/typeof.js","webpack://@gbcl-fof-upload-qcloud/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://@gbcl-fof-upload-qcloud/./node_modules/external-load/index.js","webpack://@gbcl-fof-upload-qcloud/./src/forum/extensions.js","webpack://@gbcl-fof-upload-qcloud/./src/forum/index.js","webpack://@gbcl-fof-upload-qcloud/./src/forum/downloadButtonInteraction.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","flarum","core","compat","runtime","require","regeneratorRuntime","accidentalStrictMode","globalThis","Function","define","window","undefined","navigator","userAgent","mimeTypes","nav","ua","isIE","isModernBrowser","Promise","supportsPdfMimeType","isMobileDevice","platform","maxTouchPoints","test","isSafariDesktop","vendor","isFirefoxWithPDFJS","split","length","parseInt","createAXO","type","ax","ActiveXObject","e","supportsPDFs","embedError","msg","suppressConsole","console","log","generatePDFObjectMarkup","embedType","targetNode","url","pdfOpenFragment","width","height","id","title","omitInlineStyles","PDFJS_URL","node","firstChild","removeChild","emptyNodeContents","source","connector","indexOf","encodeURIComponent","el_type","el","document","createElement","className","src","allow","frameborder","style","body","cssText","classList","add","appendChild","getElementsByTagName","embed","targetSelector","options","selector","opt","page","pdfOpenParams","fallbackLink","assumptionMode","forcePDFJS","supportRedirect","forceIframe","querySelector","jQuery","nodeType","getTargetElement","fallbackHTML","pdfParams","prop","string","slice","buildURLFragmentString","innerHTML","replace","a","b","pdfobjectversion","_typeof","_regeneratorRuntime","Op","hasOwn","$Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","obj","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","context","Context","_invoke","state","method","arg","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","done","fn","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","resolve","reject","invoke","result","__await","then","unwrapped","error","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","displayName","isGeneratorFunction","genFun","ctor","constructor","mark","setPrototypeOf","__proto__","awrap","async","iter","keys","reverse","pop","skipTempReset","prev","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","asyncGeneratorStep","gen","_next","_throw","_asyncToGenerator","args","arguments","apply","_load","tag","element","parent","attr","onload","onerror","rel","css","js","img","playerData","loaded","loadScript","extension","load","loadPlayer","initPlayer","app","initializers","extend","Post","$","unbind","on","preventDefault","stopPropagation","forum","attribute","currentTarget","dataset","fofQcloudUploadDownloadUuid","attrs","post","session","csrfToken","open","alert","translator","trans","CommentPost","container","pdfResUrl","dpContainers","querySelectorAll","pdfContainers","children","DPlayer","theme","preload","volume","loop","lang","language","live","mutex","hotkey","video","contextmenu","text","link","PDFObject"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 9);\n","module.exports = flarum.core.compat['forum/app'];","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","module.exports = flarum.core.compat['common/extend'];","/**\n *  PDFObject v2.2.8\n *  https://github.com/pipwerks/PDFObject\n *  @license\n *  Copyright (c) 2008-2022 Philip Hutchison\n *  MIT-style license: http://pipwerks.mit-license.org/\n *  UMD module pattern from https://github.com/umdjs/umd/blob/master/templates/returnExports.js\n */\n\n(function (root, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        // AMD. Register as an anonymous module.\n        define([], factory);\n    } else if (typeof module === \"object\" && module.exports) {\n        // Node. Does not work with strict CommonJS, but\n        // only CommonJS-like environments that support module.exports,\n        // like Node.\n        module.exports = factory();\n    } else {\n        // Browser globals (root is window)\n        root.PDFObject = factory();\n  }\n}(this, function () {\n\n    \"use strict\";\n\n    //PDFObject is designed for client-side (browsers), not server-side (node)\n    //Will choke on undefined navigator and window vars when run on server\n    //Return boolean false and exit function when running server-side\n\n    if( typeof window === \"undefined\" || \n        window.navigator === undefined || \n        window.navigator.userAgent === undefined || \n        window.navigator.mimeTypes === undefined){ \n            return false;\n    }\n\n    let pdfobjectversion = \"2.2.8\";\n    let nav = window.navigator;\n    let ua = window.navigator.userAgent;\n\n    //Time to jump through hoops -- browser vendors do not make it easy to detect PDF support.\n\n    /*\n        IE11 still uses ActiveX for Adobe Reader, but IE 11 doesn't expose window.ActiveXObject the same way \n        previous versions of IE did. window.ActiveXObject will evaluate to false in IE 11, but \"ActiveXObject\" \n        in window evaluates to true.\n\n        MS Edge does not support ActiveX so this test will evaluate false\n    */\n    let isIE = (\"ActiveXObject\" in window);\n\n    /*\n        There is a coincidental correlation between implementation of window.promises and native PDF support in desktop browsers\n        We use this to assume if the browser supports promises it supports embedded PDFs\n        Is this fragile? Sort of. But browser vendors removed mimetype detection, so we're left to improvise\n    */\n    let isModernBrowser = (window.Promise !== undefined);\n\n    //Older browsers still expose the mimeType\n    let supportsPdfMimeType = (nav.mimeTypes[\"application/pdf\"] !== undefined);\n\n    //Safari on iPadOS doesn't report as 'mobile' when requesting desktop site, yet still fails to embed PDFs\n    let isSafariIOSDesktopMode = (  nav.platform !== undefined && \n                                    nav.platform === \"MacIntel\" && \n                                    nav.maxTouchPoints !== undefined && \n                                    nav.maxTouchPoints > 1 );\n\n    //Quick test for mobile devices.\n    let isMobileDevice = (isSafariIOSDesktopMode || /Mobi|Tablet|Android|iPad|iPhone/.test(ua));\n\n    //Safari desktop requires special handling \n    let isSafariDesktop = ( !isMobileDevice && \n                            nav.vendor !== undefined && \n                            /Apple/.test(nav.vendor) && \n                            /Safari/.test(ua) );\n    \n    //Firefox started shipping PDF.js in Firefox 19. If this is Firefox 19 or greater, assume PDF.js is available\n    let isFirefoxWithPDFJS = (!isMobileDevice && /irefox/.test(ua) && ua.split(\"rv:\").length > 1) ? (parseInt(ua.split(\"rv:\")[1].split(\".\")[0], 10) > 18) : false;\n\n\n    /* ----------------------------------------------------\n       Supporting functions\n       ---------------------------------------------------- */\n\n    let createAXO = function (type){\n        var ax;\n        try {\n            ax = new ActiveXObject(type);\n        } catch (e) {\n            ax = null; //ensure ax remains null\n        }\n        return ax;\n    };\n\n    //If either ActiveX support for \"AcroPDF.PDF\" or \"PDF.PdfCtrl\" are found, return true\n    //Constructed as a method (not a prop) to avoid unneccesarry overhead -- will only be evaluated if needed\n    let supportsPdfActiveX = function (){ return !!(createAXO(\"AcroPDF.PDF\") || createAXO(\"PDF.PdfCtrl\")); };\n\n    //Determines whether PDF support is available\n    let supportsPDFs = (\n        //As of Sept 2020 no mobile browsers properly support PDF embeds\n        !isMobileDevice && (\n            //We're moving into the age of MIME-less browsers. They mostly all support PDF rendering without plugins.\n            isModernBrowser ||\n            //Modern versions of Firefox come bundled with PDFJS\n            isFirefoxWithPDFJS ||\n            //Browsers that still support the original MIME type check\n            supportsPdfMimeType ||\n            //Pity the poor souls still using IE\n            (isIE && supportsPdfActiveX())\n        )\n    );\n\n    //Create a fragment identifier for using PDF Open parameters when embedding PDF\n    let buildURLFragmentString = function(pdfParams){\n\n        let string = \"\";\n        let prop;\n\n        if(pdfParams){\n\n            for (prop in pdfParams) {\n                if (pdfParams.hasOwnProperty(prop)) {\n                    string += encodeURIComponent(prop) + \"=\" + encodeURIComponent(pdfParams[prop]) + \"&\";\n                }\n            }\n\n            //The string will be empty if no PDF Params found\n            if(string){\n\n                string = \"#\" + string;\n\n                //Remove last ampersand\n                string = string.slice(0, string.length - 1);\n\n            }\n\n        }\n\n        return string;\n\n    };\n\n    let embedError = function (msg, suppressConsole){\n        if(!suppressConsole){\n            console.log(\"[PDFObject] \" + msg);\n        }\n        return false;\n    };\n\n    let emptyNodeContents = function (node){\n        while(node.firstChild){\n            node.removeChild(node.firstChild);\n        }\n    };\n\n    let getTargetElement = function (targetSelector){\n\n        //Default to body for full-browser PDF\n        let targetNode = document.body;\n\n        //If a targetSelector is specified, check to see whether\n        //it's passing a selector, jQuery object, or an HTML element\n\n        if(typeof targetSelector === \"string\"){\n\n            //Is CSS selector\n            targetNode = document.querySelector(targetSelector);\n\n        } else if (window.jQuery !== undefined && targetSelector instanceof jQuery && targetSelector.length) {\n\n            //Is jQuery element. Extract HTML node\n            targetNode = targetSelector.get(0);\n\n        } else if (targetSelector.nodeType !== undefined && targetSelector.nodeType === 1){\n\n            //Is HTML element\n            targetNode = targetSelector;\n\n        }\n\n        return targetNode;\n\n    };\n\n    let generatePDFObjectMarkup = function (embedType, targetNode, url, pdfOpenFragment, width, height, id, title, omitInlineStyles, PDFJS_URL){\n\n        //Ensure target element is empty first\n        emptyNodeContents(targetNode);\n\n        let source = url;\n\n        if(embedType === \"pdfjs\"){ \n            //If PDFJS_URL already contains a ?, assume querystring is in place, and use an ampersand to append PDFJS's file parameter\n            let connector = (PDFJS_URL.indexOf(\"?\") !== -1) ? \"&\" : \"?\"; \n            source = PDFJS_URL + connector + \"file=\" + encodeURIComponent(url) + pdfOpenFragment;\n        }\n\n        let el_type = (embedType === \"pdfjs\" || embedType === \"iframe\") ? \"iframe\" : \"embed\";\n        let el = document.createElement(el_type);\n\n        el.className = \"pdfobject\";\n        el.type = \"application/pdf\";\n        el.title = title;\n        el.src = source;\n\n        if(id){\n            el.id = id;\n        }\n\n        if(el_type === \"iframe\"){\n            el.allow = \"fullscreen\";\n            el.frameborder = \"0\";\n        }\n\n        if(!omitInlineStyles){\n\n            let style = (el_type === \"embed\") ? \"overflow: auto;\" : \"border: none;\";\n\n            if(targetNode !== document.body){\n                //assign width and height to target node\n                style += \"width: \" + width + \"; height: \" + height + \";\";\n            } else {\n                //this is a full-page embed, use CSS to fill the viewport\n                style += \"position: absolute; top: 0; right: 0; bottom: 0; left: 0; width: 100%; height: 100%;\";\n            }\n\n            el.style.cssText = style; \n\n        }\n\n        targetNode.classList.add(\"pdfobject-container\");\n        targetNode.appendChild(el);\n\n        return targetNode.getElementsByTagName(el_type)[0];\n\n    };\n\n    let embed = function(url, targetSelector, options){\n\n        //If targetSelector is not defined, convert to boolean\n        let selector = targetSelector || false;\n\n        //Ensure options object is not undefined -- enables easier error checking below\n        let opt = options || {};\n\n        //Get passed options, or set reasonable defaults\n        let id = (typeof opt.id === \"string\") ? opt.id : \"\";\n        let page = opt.page || false;\n        let pdfOpenParams = opt.pdfOpenParams || {};\n        let fallbackLink = (typeof opt.fallbackLink === \"string\" || typeof opt.fallbackLink === \"boolean\") ? opt.fallbackLink : true;\n        let width = opt.width || \"100%\";\n        let height = opt.height || \"100%\";\n        let title = opt.title || \"Embedded PDF\";\n        let assumptionMode = (typeof opt.assumptionMode === \"boolean\") ? opt.assumptionMode : true;\n        let forcePDFJS = (typeof opt.forcePDFJS === \"boolean\") ? opt.forcePDFJS : false;\n        let supportRedirect = (typeof opt.supportRedirect === \"boolean\") ? opt.supportRedirect : false;\n        let omitInlineStyles = (typeof opt.omitInlineStyles === \"boolean\") ? opt.omitInlineStyles : false;\n        let suppressConsole = (typeof opt.suppressConsole === \"boolean\") ? opt.suppressConsole : false;\n        let forceIframe = (typeof opt.forceIframe === \"boolean\") ? opt.forceIframe : false;\n        let PDFJS_URL = opt.PDFJS_URL || false;\n        let targetNode = getTargetElement(selector);\n        let fallbackHTML = \"\";\n        let pdfOpenFragment = \"\";\n        let fallbackHTML_default = \"<p>This browser does not support inline PDFs. Please download the PDF to view it: <a href='[url]'>Download PDF</a></p>\";\n\n        //Ensure URL is available. If not, exit now.\n        if(typeof url !== \"string\"){ return embedError(\"URL is not valid\", suppressConsole); }\n\n        //If target element is specified but is not valid, exit without doing anything\n        if(!targetNode){ return embedError(\"Target element cannot be determined\", suppressConsole); }\n\n        //page option overrides pdfOpenParams, if found\n        if(page){ pdfOpenParams.page = page; }\n\n        //Stringify optional Adobe params for opening document (as fragment identifier)\n        pdfOpenFragment = buildURLFragmentString(pdfOpenParams);\n\n\n        // --== Do the dance: Embed attempt #1 ==--\n\n        //If the forcePDFJS option is invoked, skip everything else and embed as directed\n        if(forcePDFJS && PDFJS_URL){\n            return generatePDFObjectMarkup(\"pdfjs\", targetNode, url, pdfOpenFragment, width, height, id, title, omitInlineStyles, PDFJS_URL);\n        }\n \n        // --== Embed attempt #2 ==--\n\n        //Embed PDF if traditional support is provided, or if this developer is willing to roll with assumption\n        //that modern desktop (not mobile) browsers natively support PDFs \n        if(supportsPDFs || (assumptionMode && !isMobileDevice)){\n            \n            //Should we use <embed> or <iframe>? In most cases <embed>. \n            //Allow developer to force <iframe>, if desired\n            //There is an edge case where Safari does not respect 302 redirect requests for PDF files when using <embed> element.\n            //Redirect appears to work fine when using <iframe> instead of <embed> (Addresses issue #210)\n            //Forcing Safari desktop to use iframe due to freezing bug in macOS 11 (Big Sur)\n            let embedtype = (forceIframe || supportRedirect || isSafariDesktop) ? \"iframe\" : \"embed\";\n            \n            return generatePDFObjectMarkup(embedtype, targetNode, url, pdfOpenFragment, width, height, id, title, omitInlineStyles);\n\n        }\n        \n        // --== Embed attempt #3 ==--\n        \n        //If everything else has failed and a PDFJS fallback is provided, try to use it\n        if(PDFJS_URL){\n            return generatePDFObjectMarkup(\"pdfjs\", targetNode, url, pdfOpenFragment, width, height, id, title, omitInlineStyles, PDFJS_URL);\n        }\n        \n        // --== PDF embed not supported! Use fallback ==-- \n\n        //Display the fallback link if available\n        if(fallbackLink){\n\n            fallbackHTML = (typeof fallbackLink === \"string\") ? fallbackLink : fallbackHTML_default;\n            targetNode.innerHTML = fallbackHTML.replace(/\\[url\\]/g, url);\n\n        }\n\n        return embedError(\"This browser does not support embedded PDFs\", suppressConsole);\n\n    };\n\n    return {\n        embed: function (a,b,c){ return embed(a,b,c); },\n        pdfobjectversion: (function () { return pdfobjectversion; })(),\n        supportsPDFs: (function (){ return supportsPDFs; })()\n    };\n\n}));\n","module.exports = flarum.core.compat['forum/components/CommentPost'];","module.exports = flarum.core.compat['forum/components/Post'];","var _typeof = require(\"./typeof.js\")[\"default\"];\n\nfunction _regeneratorRuntime() {\n  \"use strict\";\n  /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return exports;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var exports = {},\n      Op = Object.prototype,\n      hasOwn = Op.hasOwnProperty,\n      $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n      iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n      asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n      toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function define(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n        generator = Object.create(protoGenerator.prototype),\n        context = new Context(tryLocsList || []);\n    return generator._invoke = function (innerFn, self, context) {\n      var state = \"suspendedStart\";\n      return function (method, arg) {\n        if (\"executing\" === state) throw new Error(\"Generator is already running\");\n\n        if (\"completed\" === state) {\n          if (\"throw\" === method) throw arg;\n          return doneResult();\n        }\n\n        for (context.method = method, context.arg = arg;;) {\n          var delegate = context.delegate;\n\n          if (delegate) {\n            var delegateResult = maybeInvokeDelegate(delegate, context);\n\n            if (delegateResult) {\n              if (delegateResult === ContinueSentinel) continue;\n              return delegateResult;\n            }\n          }\n\n          if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n            if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n            context.dispatchException(context.arg);\n          } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n          state = \"executing\";\n          var record = tryCatch(innerFn, self, context);\n\n          if (\"normal\" === record.type) {\n            if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n            return {\n              value: record.arg,\n              done: context.done\n            };\n          }\n\n          \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n        }\n      };\n    }(innerFn, self, context), generator;\n  }\n\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n\n  function Generator() {}\n\n  function GeneratorFunction() {}\n\n  function GeneratorFunctionPrototype() {}\n\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n      NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n            value = result.value;\n        return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n\n      reject(record.arg);\n    }\n\n    var previousPromise;\n\n    this._invoke = function (method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function (resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n    };\n  }\n\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n\n    if (undefined === method) {\n      if (context.delegate = null, \"throw\" === context.method) {\n        if (delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel;\n        context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n            next = function next() {\n          for (; ++i < iterable.length;) {\n            if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n          }\n\n          return next.value = undefined, next.done = !0, next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    return {\n      next: doneResult\n    };\n  }\n\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, define(Gp, \"constructor\", GeneratorFunctionPrototype), define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (object) {\n    var keys = [];\n\n    for (var key in object) {\n      keys.push(key);\n    }\n\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) {\n        \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n      }\n    },\n    stop: function stop() {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) throw exception;\n      var context = this;\n\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n            record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n              hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n\n          return thrown;\n        }\n      }\n\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}\n\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\n\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","/**\n * Simple resource loader based on David Walsh's tutorial\n * https://davidwalsh.name/javascript-loader\n * https://davidwalsh.name/javascript-functions\n */\nexport default (function() {\n    // Function which returns a function\n    function _load(tag) {\n        return function(url) {\n            // This promise will be used by Promise.all to determine success or failure\n            return new Promise(function(resolve, reject) {\n                var element = document.createElement(tag);\n                var parent = \"body\";\n                var attr = \"src\";\n\n                // Important success and error for the promise\n                element.onload = function() {\n                    resolve(url);\n                };\n                element.onerror = function() {\n                    reject(url);\n                };\n\n                // Need to set different attributes depending on tag type\n                switch (tag) {\n                    case \"script\":\n                        element.async = true;\n                        break;\n                    case \"link\":\n                        element.type = \"text/css\";\n                        element.rel = \"stylesheet\";\n                        attr = \"href\";\n                        parent = \"head\";\n                }\n\n                // Inject into document to kick off loading\n                element[attr] = url;\n                document[parent].appendChild(element);\n            });\n        };\n    }\n\n    return {\n        css: _load(\"link\"),\n        js: _load(\"script\"),\n        img: _load(\"img\")\n    };\n})();\n","export const playerData = {\r\n    url: \"https://cdn.staticfile.org/dplayer/1.27.1/DPlayer.min.js\",\r\n    loaded: false,\r\n};\r\n","import app from \"flarum/forum/app\";\nimport load from \"external-load\";\nimport PDFObject from \"PDFObject\";\nimport { playerData } from \"./extensions\";\nimport CommentPost from \"flarum/forum/components/CommentPost\";\nimport { extend } from \"flarum/common/extend\";\nimport downloadButtonInteraction from \"./downloadButtonInteraction\";\n\nconst loadScript = async extension => {\n  if (extension.loaded) {\n    return;\n  }\n  await load.js(extension.url);\n\n  extension.loaded = true;\n};\n\nconst loadPlayer = async () => await loadScript(playerData);\n\nconst initPlayer = async () => await loadPlayer();\n\nconst createPdfInstance = container => {\n  const pdfResUrl = container.dataset.url,\n    options = {\n      height: \"440px\",\n      fallbackLink: `<p>${app.translator.trans(\n        \"gbcl-fof-upload-qcloud.forum.pdf.fallbackNotice1\"\n      )}: <a href='${pdfResUrl}'>${app.translator.trans(\n        \"gbcl-fof-upload-qcloud.forum.pdf.fallbackNotice2\"\n      )}</a></p>`,\n    };\n\n  PDFObject.embed(pdfResUrl, container, options);\n};\n\napp.initializers.add(\"gbcl-fof-upload-qcloud\", () => {\n  downloadButtonInteraction();\n\n  extend(CommentPost.prototype, \"refreshContent\", () => {\n    const dpContainers = this.element.querySelectorAll(\n        \".qcloud-dplayer-container\"\n      ),\n      pdfContainers = this.element.querySelectorAll(\".qcloud-pdf-container\");\n\n    if (dpContainers.length) {\n      initPlayer()\n        .then(() => {\n          for (const i of dpContainers) {\n            if (i.children.length) {\n              continue;\n            }\n\n            new DPlayer({\n              container: i,\n              theme: \"#b7daff\",\n              preload: \"auto\",\n              volume: 0.7,\n              loop: false,\n              lang: navigator.language,\n              live: false,\n              mutex: true,\n              hotkey: true,\n              video: {\n                url: i.dataset.url,\n                type: \"auto\",\n              },\n              contextmenu: [\n                {\n                  text: \"GBCL UplQCloud\",\n                  link: \"https://github.com/GBCLStudio/FoF-Upload-Qcloud\",\n                },\n              ],\n            });\n          }\n        })\n        .catch(err => console.log(err));\n    }\n\n    if (pdfContainers.length) {\n      for (const i of pdfContainers) {\n        if (i.children.length) continue;\n\n        createPdfInstance(i);\n      }\n    }\n  });\n});","import app from 'flarum/forum/app';\nimport {extend} from 'flarum/common/extend';\nimport Post from 'flarum/forum/components/Post';\n\n/* global $ */\n\nexport default function () {\n  extend(Post.prototype, 'oncreate', function () {\n    this.$('[data-fof-qcloud-upload-download-uuid]')\n      .unbind('click')\n      .on('click', (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n\n        if (!app.forum.attribute('fof-upload.canDownload')) {\n          alert(app.translator.trans('fof-upload.forum.states.unauthorized'));\n          return;\n        }\n\n        let url = app.forum.attribute('apiUrl') + '/gbcl/fof-qcloud/download';\n\n        url += '/' + encodeURIComponent(e.currentTarget.dataset.fofQcloudUploadDownloadUuid);\n        url += '/' + encodeURIComponent(this.attrs.post.id());\n        url += '/' + encodeURIComponent(app.session.csrfToken);\n\n        window.open(url);\n      });\n  });\n}\n"],"sourceRoot":""}