{"version":3,"sources":["webpack://@gbcl-fof-upload-qcloud/webpack/bootstrap","webpack://@gbcl-fof-upload-qcloud/./node_modules/@babel/runtime/regenerator/index.js","webpack://@gbcl-fof-upload-qcloud/external \"flarum.core.compat['forum/app']\"","webpack://@gbcl-fof-upload-qcloud/external \"flarum.core.compat['common/extend']\"","webpack://@gbcl-fof-upload-qcloud/external \"flarum.core.compat['forum/components/CommentPost']\"","webpack://@gbcl-fof-upload-qcloud/external \"flarum.core.compat['forum/components/Post']\"","webpack://@gbcl-fof-upload-qcloud/./node_modules/@babel/runtime/helpers/regeneratorRuntime.js","webpack://@gbcl-fof-upload-qcloud/./node_modules/@babel/runtime/helpers/typeof.js","webpack://@gbcl-fof-upload-qcloud/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://@gbcl-fof-upload-qcloud/./node_modules/external-load/index.js","webpack://@gbcl-fof-upload-qcloud/./src/forum/extensions.js","webpack://@gbcl-fof-upload-qcloud/./src/forum/index.js","webpack://@gbcl-fof-upload-qcloud/./src/forum/downloadButtonInteraction.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","runtime","require","regeneratorRuntime","accidentalStrictMode","globalThis","Function","flarum","core","compat","_typeof","_regeneratorRuntime","Op","hasOwn","$Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","define","obj","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","context","Context","_invoke","state","method","arg","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","done","fn","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","resolve","reject","invoke","result","__await","then","unwrapped","error","undefined","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","displayName","isGeneratorFunction","genFun","ctor","constructor","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","keys","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","asyncGeneratorStep","gen","_next","_throw","_asyncToGenerator","args","arguments","apply","_load","tag","url","element","document","createElement","parent","attr","onload","onerror","rel","appendChild","css","js","img","playerData","loaded","pdfData","getHexBgColor","a","str","rgb","getElementById","style","backgroundColor","split","k","parseInt","toString","loadScript","extension","load","loadPlayer","loadPdf","init","all","app","initializers","add","extend","Post","$","unbind","on","e","preventDefault","stopPropagation","forum","attribute","encodeURIComponent","currentTarget","dataset","fofQcloudUploadDownloadUuid","attrs","post","id","session","csrfToken","window","open","alert","translator","trans","CommentPost","containers","querySelectorAll","_","children","videoUrl","lang","container","navigator","language","DPlayer","theme","preload","volume","loop","live","mutex","hotkey","video","contextmenu","text","link","console","log","pdfResUrl","PDFObject","embed"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","module.exports = flarum.core.compat['forum/app'];","module.exports = flarum.core.compat['common/extend'];","module.exports = flarum.core.compat['forum/components/CommentPost'];","module.exports = flarum.core.compat['forum/components/Post'];","var _typeof = require(\"./typeof.js\")[\"default\"];\n\nfunction _regeneratorRuntime() {\n  \"use strict\";\n  /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return exports;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var exports = {},\n      Op = Object.prototype,\n      hasOwn = Op.hasOwnProperty,\n      $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n      iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n      asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n      toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function define(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n        generator = Object.create(protoGenerator.prototype),\n        context = new Context(tryLocsList || []);\n    return generator._invoke = function (innerFn, self, context) {\n      var state = \"suspendedStart\";\n      return function (method, arg) {\n        if (\"executing\" === state) throw new Error(\"Generator is already running\");\n\n        if (\"completed\" === state) {\n          if (\"throw\" === method) throw arg;\n          return doneResult();\n        }\n\n        for (context.method = method, context.arg = arg;;) {\n          var delegate = context.delegate;\n\n          if (delegate) {\n            var delegateResult = maybeInvokeDelegate(delegate, context);\n\n            if (delegateResult) {\n              if (delegateResult === ContinueSentinel) continue;\n              return delegateResult;\n            }\n          }\n\n          if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n            if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n            context.dispatchException(context.arg);\n          } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n          state = \"executing\";\n          var record = tryCatch(innerFn, self, context);\n\n          if (\"normal\" === record.type) {\n            if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n            return {\n              value: record.arg,\n              done: context.done\n            };\n          }\n\n          \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n        }\n      };\n    }(innerFn, self, context), generator;\n  }\n\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n\n  function Generator() {}\n\n  function GeneratorFunction() {}\n\n  function GeneratorFunctionPrototype() {}\n\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n      NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n            value = result.value;\n        return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n\n      reject(record.arg);\n    }\n\n    var previousPromise;\n\n    this._invoke = function (method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function (resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n    };\n  }\n\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n\n    if (undefined === method) {\n      if (context.delegate = null, \"throw\" === context.method) {\n        if (delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel;\n        context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n            next = function next() {\n          for (; ++i < iterable.length;) {\n            if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n          }\n\n          return next.value = undefined, next.done = !0, next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    return {\n      next: doneResult\n    };\n  }\n\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, define(Gp, \"constructor\", GeneratorFunctionPrototype), define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (object) {\n    var keys = [];\n\n    for (var key in object) {\n      keys.push(key);\n    }\n\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) {\n        \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n      }\n    },\n    stop: function stop() {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) throw exception;\n      var context = this;\n\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n            record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n              hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n\n          return thrown;\n        }\n      }\n\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}\n\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\n\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","/**\n * Simple resource loader based on David Walsh's tutorial\n * https://davidwalsh.name/javascript-loader\n * https://davidwalsh.name/javascript-functions\n */\nexport default (function() {\n    // Function which returns a function\n    function _load(tag) {\n        return function(url) {\n            // This promise will be used by Promise.all to determine success or failure\n            return new Promise(function(resolve, reject) {\n                var element = document.createElement(tag);\n                var parent = \"body\";\n                var attr = \"src\";\n\n                // Important success and error for the promise\n                element.onload = function() {\n                    resolve(url);\n                };\n                element.onerror = function() {\n                    reject(url);\n                };\n\n                // Need to set different attributes depending on tag type\n                switch (tag) {\n                    case \"script\":\n                        element.async = true;\n                        break;\n                    case \"link\":\n                        element.type = \"text/css\";\n                        element.rel = \"stylesheet\";\n                        attr = \"href\";\n                        parent = \"head\";\n                }\n\n                // Inject into document to kick off loading\n                element[attr] = url;\n                document[parent].appendChild(element);\n            });\n        };\n    }\n\n    return {\n        css: _load(\"link\"),\n        js: _load(\"script\"),\n        img: _load(\"img\")\n    };\n})();\n","export const playerData = {\r\n    url: \"https://cdn.staticfile.org/dplayer/1.27.1/DPlayer.min.js\",\r\n    loaded: false,\r\n};\r\n\r\nexport const pdfData = {\r\n    url: \"https://cdn.staticfile.org/pdfobject/2.2.8/pdfobject.min.js\",\r\n    loaded: false,\r\n};","import app from 'flarum/forum/app';\nimport load from \"external-load\";\nimport { playerData, pdfData } from \"./extensions\";\nimport CommentPost from \"flarum/forum/components/CommentPost\";\nimport { extend } from \"flarum/common/extend\";\nimport downloadButtonInteraction from './downloadButtonInteraction';\n\nconst getHexBgColor = async () => {\n\tvar str = [];\n\tvar rgb = document.getElementById('body').style.backgroundColor.split('(');\n\tfor(var k = 0; k < 3; k++){\n\t\tstr[k] = parseInt(rgb[1].split(',')[k]).toString(16);\n\t}\n\tstr = '#'+str[0]+str[1]+str[2];\n\treturn str;\n}\n\n\nconst loadScript = async (extension) => {\n    if (extension.loaded) {\n        return;\n    }\n    await load.js(extension.url);\n\n    extension.loaded = true;\n};\n\n\nconst loadPlayer = async () => {\n    return await loadScript(playerData);\n};\n\nconst loadPdf = async () => {\n    return await loadScript(pdfData);\n};\n\nconst init = () => {\n    return Promise.all([loadPdf(), loadPlayer()]);\n};\n\nconst createPdfInstance = (\n\tcontainer\n) => {\n\tconst pdfResUrl = container.dataset.url;\n\n\tPDFObject.embed(\n\t\tpdfResUrl, \n\t\tcontainer\n\t\t);\n}\n\nconst createDpInstance = (\n    container\n) => {\n    const videoUrl = container.dataset.url;\n\tconst lang = navigator.language;\n\n\n\tconst dp = new DPlayer({\n\t\tcontainer: container,\n\t\ttheme: getHexBgColor(),\n\t\tpreload: \"auto\",\n\t\tvolume: 0.7,\n\t\tloop: false,\n\t\tlang: lang,\n\t\tlive: false,\n\t\tmutex: true,\n\t\thotkey: true,\n\t\tvideo: {\n\t\t\turl: videoUrl,\n\t\t\ttype: 'auto',\n\t\t},\n\t\tcontextmenu: [\n\t\t\t{\n\t\t\t\ttext: 'Powered by FoF-Upload-Qcloud',\n\t\t\t\tlink: 'https://github.com/GBCLStudio/FoF-Upload-Qcloud',\n\t\t\t}\n\t\t]\n\t});\n}\napp.initializers.add('gbcl-fof-upload-qcloud', () => {\n\tdownloadButtonInteraction();\n\n  \textend(CommentPost.prototype, \"refreshContent\", function () {\n\t\tconst containers = this.element.querySelectorAll(\".qcloud-dplayer-container\");\n\n\t\tif (containers.length) {\n\t\t\tinit().then((_) => {\n\t\t\t\tfor (const i of containers) {\n                    if (i.children.length) {\n                        continue;\n                    }\n\n                    createDpInstance(i);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(function(err) { console.log(err); });\n\t\t}\n\t});\n\n\textend(CommentPost.prototype, \"refreshContent\", function () {\n\t\tconst containers = this.element.querySelectorAll(\".qcloud-pdf-container\");\n\n\t\tif (containers.length) {\n\t\t\tinit().then((_) => {\n\t\t\t\tfor (const i of containers) {\n                    if (i.children.length) {\n                        continue;\n                    }\n\n                    createPdfInstance(i);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(function(err) { console.log(err); });\n\t\t}\n\t});\n});","import app from 'flarum/forum/app';\nimport {extend} from 'flarum/common/extend';\nimport Post from 'flarum/forum/components/Post';\n\n/* global $ */\n\nexport default function () {\n  extend(Post.prototype, 'oncreate', function () {\n    this.$('[data-fof-qcloud-upload-download-uuid]')\n      .unbind('click')\n      .on('click', (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n\n        if (!app.forum.attribute('fof-upload.canDownload')) {\n          alert(app.translator.trans('fof-upload.forum.states.unauthorized'));\n          return;\n        }\n\n        let url = app.forum.attribute('apiUrl') + '/gbcl/fof-qcloud/download';\n\n        url += '/' + encodeURIComponent(e.currentTarget.dataset.fofQcloudUploadDownloadUuid);\n        url += '/' + encodeURIComponent(this.attrs.post.id());\n        url += '/' + encodeURIComponent(app.session.csrfToken);\n\n        window.open(url);\n      });\n  });\n}\n"],"sourceRoot":""}